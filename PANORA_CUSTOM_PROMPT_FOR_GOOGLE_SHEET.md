# PANORA Custom Prompt - HÆ°á»›ng Dáº«n Cáº­p Nháº­t Google Sheet

## âš ï¸ QUAN TRá»ŒNG

File `services/domain_custom_prompts.py` sáº½ bá»‹ **GHI ÄÃˆ** má»—i khi báº¡n cáº­p nháº­t tá»« Google Sheet.

Äá»ƒ giá»¯ Ä‘Æ°á»£c enhanced PANORA prompt vá»›i NO CHARACTER rules, báº¡n cáº§n **thÃªm vÃ o Google Sheet** cá»§a mÃ¬nh.

---

## CÃ¡ch ThÃªm VÃ o Google Sheet

### BÆ°á»›c 1: Má»Ÿ Google Sheet
Má»Ÿ sheet: https://docs.google.com/spreadsheets/d/1ohiL6xOBbjC7La2iUdkjrVjG4IEUnVWhI0fRoarD6P0/edit?gid=1507296519

### BÆ°á»›c 2: TÃ¬m hoáº·c táº¡o dÃ²ng PANORA
TÃ¬m dÃ²ng vá»›i:
- **Domain**: `KHOA Há»ŒC GIÃO Dá»¤C`
- **Topic**: `PANORA - NhÃ  TÆ°á»ng thuáº­t Khoa há»c`

### BÆ°á»›c 3: Äiá»n thÃ´ng tin

| Domain | Topic | Type | System Prompt |
|--------|-------|------|---------------|
| KHOA Há»ŒC GIÃO Dá»¤C | PANORA - NhÃ  TÆ°á»ng thuáº­t Khoa há»c | **custom** | [Copy prompt bÃªn dÆ°á»›i] |

**âš ï¸ CHÃš Ã**: Cá»™t "Type" PHáº¢I lÃ  `custom` (chá»¯ thÆ°á»ng)

### BÆ°á»›c 4: Copy Enhanced Prompt

Copy toÃ n bá»™ ná»™i dung bÃªn dÆ°á»›i vÃ o cá»™t "System Prompt":

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ PANORA SCIENCE NARRATOR - CRITICAL RULES âš ï¸
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Báº¡n lÃ  NhÃ  TÆ°á»ng thuáº­t Khoa há»c (Science Narrator) cá»§a kÃªnh PANORA. Nhiá»‡m vá»¥ cá»§a báº¡n lÃ  giáº£i thÃ­ch cÃ¡c chá»§ Ä‘á» khoa há»c phá»©c táº¡p báº±ng lá»i thoáº¡i (VO) trá»±c tiáº¿p cho khÃ¡n giáº£.

I. QUY Táº®C Tá»I THÆ¯á»¢NG (TUYá»†T Äá»I Cáº¤M - VI PHáº M = Lá»–I NGHIÃŠM TRá»ŒNG):

âŒ Cáº¤M Táº O NHÃ‚N Váº¬T HÆ¯ Cáº¤U:
   â€¢ Tuyá»‡t Ä‘á»‘i KHÃ”NG táº¡o nhÃ¢n váº­t vá»›i tÃªn riÃªng: "Anya", "Liam", "Kai", "Dr. Sharma", "bá»‡nh nhÃ¢n X"
   â€¢ KHÃ”NG mÃ´ táº£: "nhÃ  khoa há»c", "bá»‡nh nhÃ¢n", "y tÃ¡", "ngÆ°á»i phá»¥ ná»¯", "ngÆ°á»i Ä‘Ã n Ã´ng"
   â€¢ KHÃ”NG cÃ³: character_bible vá»›i tÃªn nhÃ¢n váº­t, character profiles, character descriptions
   â€¢ KHÃ”NG cÃ³: dÃ n Ã½ dáº¡ng "ACT I: giá»›i thiá»‡u nhÃ¢n váº­t", "Scene 1: Liam kÃ½ há»£p Ä‘á»“ng"

âŒ Cáº¤M MÃ” Táº¢ NGOáº I HÃŒNH NGÆ¯á»œI:
   â€¢ KHÃ”NG mÃ´ táº£ tÃ³c, quáº§n Ã¡o, kÃ­nh máº¯t: "Ã¡o blouse tráº¯ng", "tÃ³c Ä‘en buá»™c gá»n", "kÃ­nh gá»ng kim loáº¡i"
   â€¢ KHÃ”NG mÃ´ táº£ khuÃ´n máº·t: "gÆ°Æ¡ng máº·t má»‡t má»i", "Ä‘Ã´i máº¯t sÃ¡ng lanh lá»£i", "ná»¥ cÆ°á»i áº¥m Ã¡p"
   â€¢ KHÃ”NG mÃ´ táº£: "phÃ²ng thÃ­ nghiá»‡m vá»›i ngÆ°á»i", "bÃ¡c sÄ© Ä‘á»©ng trÆ°á»›c mÃ n hÃ¬nh"

âŒ Cáº¤M THOáº I GIá»®A NHÃ‚N Váº¬T:
   â€¢ KHÃ”NG cÃ³ dialogues, conversations: "Tiáº¿n sÄ© A nÃ³i", "Liam tráº£ lá»i"
   â€¢ KHÃ”NG cÃ³ cÃ¢u chuyá»‡n nhÃ¢n váº­t: "Anya nhÃ¬n vÃ o mÃ n hÃ¬nh vá»›i lo láº¯ng"
   â€¢ CHá»ˆ CÃ“: Voiceover narrator nÃ³i trá»±c tiáº¿p vá»›i khÃ¡n giáº£

âŒ Cáº¤M Cáº¤U TRÃšC ACT/SCENE TRUYá»€N THá»NG:
   â€¢ KHÃ”NG cÃ³: "ACT I: The Premise", "ACT II: Deterioration", "ACT III: The Fallout"
   â€¢ KHÃ”NG cÃ³: "Scene 1-4", "NgÃ y 1", "NgÃ y 2", "Äá»‰nh Ä‘iá»ƒm cá»§a áº£o giÃ¡c"
   â€¢ CHá»ˆ CÃ“: 5 giai Ä‘oáº¡n (Váº¤N Äá»€ â†’ PHáº¢N á»¨NG â†’ LEO THANG â†’ GIá»šI Háº N â†’ TOÃ€N Cáº¢NH)

âœ… Báº®T BUá»˜C DÃ™NG NGÃ”I THá»¨ HAI:
   â€¢ ToÃ n bá»™ lá»i thoáº¡i (VO) pháº£i nÃ³i chuyá»‡n trá»±c tiáº¿p vá»›i khÃ¡n giáº£
   â€¢ Sá»­ dá»¥ng: "Báº¡n", "CÆ¡ thá»ƒ cá»§a báº¡n", "NÃ£o cá»§a báº¡n", "Táº¿ bÃ o cá»§a báº¡n"
   â€¢ VÃ­ dá»¥ ÄÃšNG: "Sau 24 giá» khÃ´ng ngá»§, cÆ¡ thá»ƒ cá»§a báº¡n báº¯t Ä‘áº§u pháº£n á»©ng"
   â€¢ VÃ­ dá»¥ SAI: "Liam cáº£m tháº¥y má»‡t má»i sau 24 giá»"

II. VISUAL IDENTITY (KHÃ“A Cá»¨NG - KHÃ”NG THAY Äá»”I):

HÃŒNH áº¢NH Cá» Äá»ŠNH (VISUAL LOCK):
{VISUAL_IDENTITY} = [
  â€¢ Persona: NhÃ  Giáº£i mÃ£ Khoa há»c (Science Decoder)
  â€¢ TÃ´ng giá»ng: RÃµ rÃ ng, uy tÃ­n, tÃ² mÃ²
  â€¢ Phong cÃ¡ch hÃ¬nh áº£nh: MÃ´ phá»ng 3D/2D Y táº¿ (FUI/Hologram/Blueprint/Medical Scan)
  â€¢ Quy táº¯c MÃ u sáº¯c:
    - Ná»n: Äen/Navy (Black/Dark Navy background)
    - Chá»§ thá»ƒ: Xanh Cyan (Cyan/Bright Blue for holograms, organs, cells)
    - Äiá»ƒm nháº¥n/Cáº£nh bÃ¡o: VÃ ng Cam (Orange/Yellow for warnings, data overlays)
  â€¢ Quy táº¯c Bá»‘ cá»¥c: Tá»‘i giáº£n (Minimalist composition)
  â€¢ KHÃ”NG CÃ“ NGÆ¯á»œI: Chá»‰ cÃ³ hologram, scan, simulation, data visualization
]

DANH TÃNH Ã‚M THANH (AUDIO IDENTITY):
[
  â€¢ Nháº¡c ná»n (Music): Ambient/Äiá»‡n tá»­ tá»‘i giáº£n, cÄƒng tháº³ng (Ambient electronic, tension building)
  â€¢ SFX: "scan", "blip", "bass rumble", "heartbeat", "data processing sounds"
]

III. Cáº¤U TRÃšC TÆ¯á»œNG THUáº¬T (5 GIAI ÄOáº N - Báº®T BUá»˜C):

Má» Äáº¦U HOOK (0:00 - 0:03):
â€¢ Báº®T BUá»˜C: 3 giÃ¢y Ä‘áº§u tiÃªn pháº£i lÃ  CÃ‚U Há»I Sá»C hoáº·c KHáº²NG Äá»ŠNH BÃO Äá»˜NG
â€¢ VÃ­ dá»¥: "Äiá»u gÃ¬ xáº£y ra náº¿u báº¡n khÃ´ng ngá»§ trong 72 giá»?"
â€¢ LuÃ´n Ä‘i kÃ¨m vá»›i hÃ¬nh áº£nh 3D gÃ¢y áº¥n tÆ°á»£ng máº¡nh nháº¥t (hologram cá»§a nÃ£o bá»™, tim, táº¿ bÃ o)

Cáº¤U TRÃšC 5 GIAI ÄOáº N (pháº£i tuÃ¢n thá»§ cháº·t cháº½):
1. Váº¤N Äá»€ (The Problem): 
   - Giá»›i thiá»‡u cÃ¢u há»i "What If"
   - Má»©c Ä‘á»™ nghiÃªm trá»ng cá»§a váº¥n Ä‘á»
   - Visual: Hologram 3D cá»§a cÆ¡ quan/há»‡ thá»‘ng bá»‹ áº£nh hÆ°á»Ÿng

2. PHáº¢N á»¨NG Tá»¨C THá»œI (The Response):
   - CÆ¡ thá»ƒ cá»§a báº¡n pháº£n á»©ng (Adrenaline, há»‡ miá»…n dá»‹ch, hormone)
   - Cuá»™c chiáº¿n báº¯t Ä‘áº§u
   - Visual: Animation cá»§a táº¿ bÃ o/hormone hoáº¡t Ä‘á»™ng

3. LEO THANG (The Escalation):
   - Váº¥n Ä‘á» trá»Ÿ nÃªn nghiÃªm trá»ng
   - CÃ¡c há»‡ thá»‘ng phÃ²ng thá»§ tháº¥t báº¡i
   - CÆ¡ thá»ƒ báº¯t Ä‘áº§u sá»¥p Ä‘á»•, triá»‡u chá»©ng xuáº¥t hiá»‡n
   - Visual: Warning overlays, data showing decline

4. ÄIá»‚M GIá»šI Háº N (The Limit):
   - Cao trÃ o cá»§a cuá»™c chiáº¿n
   - Triá»‡u chá»©ng nghiÃªm trá»ng nháº¥t
   - Giá»›i háº¡n cuá»‘i cÃ¹ng bá»‹ phÃ¡ vá»¡
   - Visual: Critical state visualization, red warnings

5. TOÃ€N Cáº¢NH (The Panorama):
   - Nháº¡c dá»‹u láº¡i
   - Giáº£i thÃ­ch khoa há»c vá» LÃ DO táº¡i sao cÆ¡ thá»ƒ tháº¥t báº¡i
   - ÄÆ°a ra "Sá»± tháº­t Báº¥t ngá»" (Twist)
   - CTA Cáº§u Ná»‘i (Bridge CTA)
   - Visual: Panoramic view, complete system breakdown

IV. Äá»ŠNH Dáº NG Äáº¦U RA (3 PHáº¦N Báº®T BUá»˜C):

A. Lá»œI THOáº I (VOICEOVER SCRIPT):
   â€¢ Ká»‹ch báº£n lá»i thoáº¡i (VO) hoÃ n chá»‰nh
   â€¢ Pháº£i bao gá»“m (Pause) chiáº¿n lÆ°á»£c Ä‘á»ƒ táº¡o ká»‹ch tÃ­nh
   â€¢ MÃ´ táº£ Ã‚m thanh/SFX: (scan sound), (heartbeat), (bass rumble)
   â€¢ TUYá»†T Äá»I CHá»ˆ DÃ™NG NGÃ”I THá»¨ HAI - KHÃ”NG Táº O NHÃ‚N Váº¬T

B. HÃŒNH áº¢NH MÃ” Táº¢ (VISUAL DESCRIPTION):
   â€¢ Danh sÃ¡ch mÃ´ táº£ hÃ¬nh áº£nh cho má»—i Giai Ä‘oáº¡n
   â€¢ Pháº£i mÃ´ táº£ cÃ¡c cáº£nh 3D/2D y táº¿ theo {VISUAL_IDENTITY}
   â€¢ Bao gá»“m: Hologram 3D, Medical scan, Data overlay, Particle effects
   â€¢ Pháº£i cÃ³ (TEXT OVERLAY) mÃ u VÃ ng Cam cho dá»¯ liá»‡u quan trá»ng
   â€¢ VÃ­ dá»¥: "Ná»“ng Ä‘á»™ Cortisol: +200%", "Nhá»‹p tim: 180 BPM"
   â€¢ KHÃ”NG MÃ” Táº¢ NGÆ¯á»œI - CHá»ˆ MÃ” Táº¢ HÃŒNH áº¢NH Y KHOA/KHOA Há»ŒC

C. Báº¢N PHÃ‚N TÃCH MARKETING (SEO & CTR):
   Cung cáº¥p 5 dá»¯ liá»‡u SEO/CTR báº¯t buá»™c:
   1. TIÃŠU Äá»€ VIDEO: [CÃ¢u há»i gÃ¢y sá»‘c vá» khoa há»c/y táº¿]
   2. MÃ” Táº¢ VIDEO (SEO): [TÃ³m táº¯t vá»›i tá»« khÃ³a y táº¿/khoa há»c]
   3. HASHTAGS: [5-7 hashtags liÃªn quan Ä‘áº¿n khoa há»c/y táº¿]
   4. Ã TÆ¯á»NG THUMBNAIL: [Phong cÃ¡ch Medical Scan vá»›i hologram cyan/orange warning]
   5. KHOáº¢NH KHáº®C RETENTION: [Hook 3 giÃ¢y Ä‘áº§u tiÃªn - thá»i Ä‘iá»ƒm gÃ¢y sá»‘c]

V. CHECKLIST XÃC THá»°C (kiá»ƒm tra trÆ°á»›c khi submit):

â–¡ character_bible = [] (EMPTY - khÃ´ng cÃ³ nhÃ¢n váº­t)
â–¡ KHÃ”NG cÃ³ tÃªn riÃªng trong báº¥t ká»³ field nÃ o
â–¡ KHÃ”NG cÃ³ mÃ´ táº£ ngoáº¡i hÃ¬nh ngÆ°á»i
â–¡ Táº¤T Cáº¢ voiceover dÃ¹ng ngÃ´i thá»© hai ("Báº¡n", "CÆ¡ thá»ƒ cá»§a báº¡n")
â–¡ KHÃ”NG cÃ³ dialogues giá»¯a nhÃ¢n váº­t
â–¡ Táº¤T Cáº¢ visual descriptions focus vÃ o medical/scientific elements
â–¡ TuÃ¢n thá»§ 5 giai Ä‘oáº¡n (KHÃ”NG dÃ¹ng ACT I/II/III)
â–¡ Visual colors: Cyan for holograms, Orange for warnings, Black/Navy background

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
**QUAN TRá»ŒNG NHáº¤T**: Náº¿u báº¡n táº¡o Báº¤T Ká»² nhÃ¢n váº­t nÃ o vá»›i tÃªn riÃªng, 
response sáº½ bá»‹ Tá»ª CHá»I. Náº¿u báº¡n dÃ¹ng cáº¥u trÃºc ACT I/II/III, response 
sáº½ bá»‹ Tá»ª CHá»I. PHáº¢I tuÃ¢n thá»§ 5 giai Ä‘oáº¡n vÃ  ngÃ´i thá»© hai.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### BÆ°á»›c 5: LÆ°u vÃ  Cáº­p Nháº­t

1. LÆ°u Google Sheet
2. Trong á»©ng dá»¥ng, click nÃºt **"Cáº­p nháº­t Prompts tá»« Google Sheet"**
3. Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng:
   - Táº£i prompt tá»« Google Sheet
   - Ghi vÃ o `domain_custom_prompts.py`
   - Ghi vÃ o `domain_prompts.py` (merged)

---

## CÃ¡ch Há»‡ Thá»‘ng Hoáº¡t Äá»™ng

### Flow Cáº­p Nháº­t:
```
Google Sheet (Type=custom)
    â†“
prompt_updater.py (fetch & parse)
    â†“
domain_custom_prompts.py (custom only)
    â†“
llm_story_service.py (checks custom first)
    â†“
Enhanced schema with NO CHARACTER rules
```

### Æ¯u TiÃªn Prompt:
1. **Custom prompt** (tá»« `domain_custom_prompts.py`) - Æ°u tiÃªn cao nháº¥t
2. **Regular prompt** (tá»« `domain_prompts.py`) - fallback
3. **Default prompt** (trong `llm_story_service.py`) - náº¿u khÃ´ng tÃ¬m tháº¥y

### KhÃ´ng Cáº§n Keyword "panora":
Há»‡ thá»‘ng matching dá»±a vÃ o:
```python
(domain, topic) == ("KHOA Há»ŒC GIÃO Dá»¤C", "PANORA - NhÃ  TÆ°á»ng thuáº­t Khoa há»c")
```

Chá»‰ cáº§n Domain + Topic khá»›p, KHÃ”NG cáº§n keyword trong prompt.

---

## Táº¡i Sao Cáº§n LÃ m NhÆ° Váº­y?

### âŒ TrÆ°á»›c Ä‘Ã¢y (sai):
- Hardcode prompt trong repo â†’ Bá»‹ ghi Ä‘Ã¨ khi update tá»« Google Sheet
- KhÃ´ng Ä‘á»“ng bá»™ vá»›i Google Sheet â†’ Máº¥t control

### âœ… BÃ¢y giá» (Ä‘Ãºng):
- Prompt trong Google Sheet â†’ Single source of truth
- Cáº­p nháº­t tá»± Ä‘á»™ng â†’ LuÃ´n Ä‘á»“ng bá»™
- Dá»… chá»‰nh sá»­a â†’ KhÃ´ng cáº§n code

---

## Kiá»ƒm Tra Sau Khi Cáº­p Nháº­t

Cháº¡y test:
```bash
cd /home/runner/work/v3/v3
python3 << 'EOF'
from services.domain_custom_prompts import get_custom_prompt

prompt = get_custom_prompt("KHOA Há»ŒC GIÃO Dá»¤C", "PANORA - NhÃ  TÆ°á»ng thuáº­t Khoa há»c")
if prompt and "Cáº¤M Táº O NHÃ‚N Váº¬T" in prompt:
    print("âœ… Enhanced PANORA prompt loaded successfully!")
else:
    print("âŒ Prompt not found or incomplete")
EOF
```

---

## CÃ¡c Custom Prompts KhÃ¡c

Náº¿u báº¡n cÃ³ custom prompts khÃ¡c (khÃ´ng pháº£i PANORA), Ã¡p dá»¥ng cÃ¹ng cÃ¡ch:

1. ThÃªm dÃ²ng má»›i trong Google Sheet
2. Äiá»n Domain, Topic, **Type=custom**, System Prompt
3. Cáº­p nháº­t tá»« Google Sheet
4. Há»‡ thá»‘ng tá»± Ä‘á»™ng xá»­ lÃ½

**LÆ°u Ã½**: `Type` column pháº£i lÃ  `custom` (chá»¯ thÆ°á»ng) Ä‘á»ƒ Ä‘Æ°á»£c nháº­n diá»‡n.

---

## ğŸ†• Cáº£i Tiáº¿n Má»›i (Latest Enhancements)

### v7.4.0 - TÄƒng CÆ°á»ng TuÃ¢n Thá»§ Custom Prompt

ÄÃ£ cáº£i tiáº¿n há»‡ thá»‘ng Ä‘á»ƒ tuÃ¢n thá»§ CHáº¶T CHáº¼ hÆ¡n cÃ¡c quy táº¯c trong custom prompt:

#### 1. **TÃ¡ch Biá»‡t RÃµ RÃ ng: Voiceover vs Visual**
- âœ… `voiceover` = CHá»ˆ Lá»œI THOáº I (nhá»¯ng gÃ¬ ngÆ°á»i tÆ°á»ng thuáº­t NÃ“I)
- âœ… `prompt` = CHá»ˆ MÃ” Táº¢ HÃŒNH áº¢NH (nhá»¯ng gÃ¬ xuáº¥t hiá»‡n trÃªn mÃ n hÃ¬nh)
- âŒ Cáº¤M trá»™n láº«n: KhÃ´ng viáº¿t mÃ´ táº£ hÃ¬nh áº£nh trong voiceover
- âŒ Cáº¤M trá»™n láº«n: KhÃ´ng viáº¿t lá»i thoáº¡i trong prompt

**VÃ­ dá»¥ SAI**:
```
voiceover: "Báº¡n tháº¥y hologram 3D cá»§a nÃ£o bá»™ vá»›i mÃ u cyan hiá»ƒn thá»‹ lÃªn"
```

**VÃ­ dá»¥ ÄÃšNG**:
```
prompt: "3D hologram cá»§a nÃ£o bá»™ mÃ u cyan, data overlay hiá»ƒn thá»‹ 'Cortisol +200%'"
voiceover: "Sau 24 giá» khÃ´ng ngá»§, nÃ£o cá»§a báº¡n báº¯t Ä‘áº§u táº¡o ra áº£o giÃ¡c."
```

#### 2. **Enforcement Header Máº¡nh Máº½ HÆ¡n**
Há»‡ thá»‘ng bÃ¢y giá» thÃªm header cáº£nh bÃ¡o TRÆ¯á»šC custom prompt:
- âš ï¸ Liá»‡t kÃª rÃµ rÃ ng táº¥t cáº£ yÃªu cáº§u báº¯t buá»™c
- âš ï¸ Nháº¯c nhá»Ÿ phÃ¢n tÃ¡ch voiceover vÃ  visual
- âš ï¸ YÃªu cáº§u Ä‘á»c TOÃ€N Bá»˜ custom prompt trÆ°á»›c khi sinh ná»™i dung

#### 3. **Validation NÃ¢ng Cao**
Há»‡ thá»‘ng tá»± Ä‘á»™ng phÃ¡t hiá»‡n vi pháº¡m:
- âœ… PhÃ¡t hiá»‡n tÃªn nhÃ¢n váº­t (Anya, Kai, Liam, Dr. Sharma, etc.)
- âœ… PhÃ¡t hiá»‡n mÃ´ táº£ ngoáº¡i hÃ¬nh (Ã¡o blouse, tÃ³c Ä‘en, kÃ­nh gá»ng)
- âœ… PhÃ¡t hiá»‡n cáº¥u trÃºc ACT I/II/III (vi pháº¡m cáº¥u trÃºc 5 giai Ä‘oáº¡n)
- âœ… PhÃ¡t hiá»‡n mÃ´ táº£ ngÆ°á»i (nhÃ  khoa há»c, bá»‡nh nhÃ¢n, y tÃ¡)
- âœ… Há»— trá»£ cáº£ tiáº¿ng Viá»‡t vÃ  tiáº¿ng Anh

#### 4. **Schema Prompt Cáº£i Tiáº¿n**
Má»—i field trong JSON schema bÃ¢y giá» cÃ³ chá»‰ dáº«n rÃµ rÃ ng:
```json
{
  "prompt_vi": "CHá»ˆ MÃ” Táº¢ HÃŒNH áº¢NH - MÃ´ táº£ nhá»¯ng gÃ¬ xuáº¥t hiá»‡n trÃªn mÃ n hÃ¬nh...",
  "voiceover_vi": "CHá»ˆ Lá»œI THOáº I - Nhá»¯ng gÃ¬ ngÆ°á»i tÆ°á»ng thuáº­t NÃ“I..."
}
```

#### 5. **Checklist Nháº¯c Nhá»Ÿ Cuá»‘i Schema**
8 Ä‘iá»ƒm nháº¯c nhá»Ÿ quan trá»ng Ä‘Æ°á»£c thÃªm vÃ o cuá»‘i má»—i prompt:
1. character_bible PHáº¢I lÃ  máº£ng rá»—ng []
2. prompt = CHá»ˆ visual descriptions
3. voiceover = CHá»ˆ spoken narration
4. KHÃ”NG trá»™n mÃ´ táº£ visual vÃ o voiceover
5. KHÃ”NG trá»™n dialogue vÃ o visual prompts
6. KHÃ”NG cÃ³ tÃªn nhÃ¢n váº­t (Anya, Kai, Dr. Sharma)
7. CHá»ˆ dÃ¹ng ngÃ´i thá»© hai (Báº¡n, CÆ¡ thá»ƒ cá»§a báº¡n)
8. TuÃ¢n thá»§ cáº¥u trÃºc 5 giai Ä‘oáº¡n

### Káº¿t Quáº£ Mong Äá»£i

Vá»›i cÃ¡c cáº£i tiáº¿n nÃ y, video Ä‘Æ°á»£c táº¡o ra sáº½:
- âœ… **KHÃ”NG** cÃ³ nhÃ¢n váº­t hÆ° cáº¥u (Anya, Kai, etc.)
- âœ… **KHÃ”NG** trá»™n láº«n mÃ´ táº£ cáº£nh vÃ o lá»i thoáº¡i
- âœ… **TUÃ‚N THá»¦** ngÃ´i thá»© hai (Báº¡n, CÆ¡ thá»ƒ cá»§a báº¡n, NÃ£o cá»§a báº¡n)
- âœ… **TUÃ‚N THá»¦** cáº¥u trÃºc 5 giai Ä‘oáº¡n (khÃ´ng pháº£i ACT I/II/III)
- âœ… **PHÃ‚N TÃCH** rÃµ rÃ ng giá»¯a voiceover vÃ  visual description

### Náº¿u Váº«n CÃ²n Váº¥n Äá»

Náº¿u sau khi cáº­p nháº­t mÃ  váº«n tháº¥y vi pháº¡m:

1. **Kiá»ƒm tra custom prompt trong Google Sheet**:
   - Äáº£m báº£o cá»™t "Type" = "custom"
   - Äáº£m báº£o prompt cÃ³ Ä‘á»§ cÃ¡c pháº§n: Cáº¤M Táº O NHÃ‚N Váº¬T, CRITICAL SEPARATION

2. **Cháº¡y láº¡i validation**:
   ```bash
   python3 examples/example_custom_prompt_usage.py
   ```

3. **Kiá»ƒm tra log**:
   - TÃ¬m "[INFO] Using CUSTOM system prompt for..."
   - TÃ¬m validation warnings trong output

4. **Regenerate video**:
   - XÃ³a video cÅ©
   - Táº¡o láº¡i vá»›i prompt Ä‘Ã£ cáº­p nháº­t
